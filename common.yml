postgres:
  image: postgres:latest
  env_file:
    ./postgres.env
  ports:
    - "5432:5432"
  volumes:
    - $GOPATH/src/github.com/hpcloud/portal-proxy/db/initial:/docker-entrypoint-initdb.d


proxy:
  build: $GOPATH/src/github.com/hpcloud/portal-proxy
  dockerfile: Dockerfile.server
  ports:
    - "3003:3003"
  env_file:
    ./proxy.env
  volumes:
    - $GOPATH/src/github.com/hpcloud/portal-proxy:/srv


nginx:
  build: ../stratos-server
  dockerfile: Dockerfile.dev
  ports:
    - "80:80"
  volumes:
    - ../stratos-ui/dist:/usr/share/nginx/html:ro
  # NOTE: links field must be included individually if extending this file.
  #links:
  #  - api:api


ui:
  build: ../stratos-ui
  dockerfile: Dockerfile.prod
  volumes:
    - ../stratos-ui:/usr/src/app
    - ../helion-ui-framework:/usr/src/helion-ui-framework
    - ../helion-ui-theme:/usr/src/helion-ui-theme
