# The development docker-compose file.
# Use this to have things like "gulp watch" running in the UI.
data:
  extends:
    file: common.yml
    service: data


db:
  extends:
    file: common.yml
    service: db
  volumes_from:
    - data


# Mock Cloud Foundry service
cf:
  extends:
    file: common.yml
    service: cf


# Mock Auth service
auth:
  extends:
    file: common.yml
    service: auth


api:
  extends:
    file: common.yml
    service: api
  environment:
    GITHUB_OAUTH_CLIENT_ID: ${GITHUB_OAUTH_CLIENT_ID}
    GITHUB_OAUTH_CLIENT_SECRET: ${GITHUB_OAUTH_CLIENT_SECRET}
    GITHUB_OAUTH_REDIRECT_URL: ${GITHUB_OAUTH_REDIRECT_URL}
  links:
    - db:db
    - auth:auth_service
    - cf:cf_service


postgres:
  extends:
    file: common.yml
    service: postgres


proxy:
  extends:
    file: common.yml
    service: proxy
  links:
    - postgres:postgres


nginx:
  extends:
    file: common.yml
    service: nginx
  links:
    - api:api
    - proxy:proxy


ui:
  extends:
    file: common.yml
    service: ui
  dockerfile: Dockerfile
