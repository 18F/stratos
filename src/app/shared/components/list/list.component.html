<!-- TODO: Error cases for both-->
<div class="listComponent">
  <div class="listComponent__header">
    <md-card-header>
    </md-card-header>
    <md-card>
      <md-card-content [ngClass]="{'selected': (dataSource.isSelecting$ | async) }" [hidden]="paginator.length === 0">
        <div [hidden]="(dataSource.isSelecting$ | async) || (dataSource.isAdding$ | async)" class="spacer">{{ text?.title }}</div>
        <div [hidden]="!(dataSource.isSelecting$ | async)" class="spacer">{{dataSource.selectedRows.size}} Selected</div>
        <div [hidden]="(dataSource.isSelecting$ | async) || (dataSource.isAdding$ | async)">
          <div [hidden]="!enableFilter || (paginator.length === 0 && !filter) ">
            <form novalidate>
              <md-form-field floatPlaceholder="never">
                <input mdInput ngModel #filter="ngModel" name="filter" placeholder="{{text?.filter || 'Filter Rows'}}">
              </md-form-field>
            </form>
          </div>
          <button md-icon-button *ngIf="addForm" (click)="safeAddForm().reset();dataSource.startAdd();;">
              <md-icon>add</md-icon>
            </button>
        </div>
        <div [hidden]="!(dataSource.isSelecting$ | async)">
          <button md-icon-button (click)="dataSource.selectedDelete()">
              <md-icon>delete</md-icon>
            </button>
        </div>
        <div [hidden]="!(dataSource.isAdding$ | async)">
          <div class="spacer"></div>
          <ng-content select="[app-table-add]"></ng-content>
          <button md-icon-button (click)="dataSource.saveAdd()" [disabled]="!safeAddForm().valid"><md-icon>done</md-icon></button>
          <button md-icon-button (click)="dataSource.cancelAdd()"><md-icon>clear</md-icon></button>
        </div>
        <md-button-toggle-group #listView="mdButtonToggleGroup" [value]="(dataSource.listView$ | async)" (change)="updateListView($event.value)">
          <md-button-toggle value="cards">
            <md-icon>grid_on</md-icon>
          </md-button-toggle>
          <md-button-toggle value="table">
            <md-icon>list</md-icon>
          </md-button-toggle>
        </md-button-toggle-group>
      </md-card-content>
    </md-card>

  </div>
  <div class="listComponent__body">
    <app-cards *ngIf="(dataSource.listView$ | async) === 'cards'" #cards [dataSource]="dataSource" [component]="cardComponent"></app-cards>
    <app-table *ngIf="(dataSource.listView$ | async) === 'table'" #table [dataSource]="dataSource" [columns]="columns" [text]="text"
      [enableFilter]="true">
    </app-table>
  </div>
</div>
