<div class="service-registration" ng-class="{'overlay-position': serviceRegistrationCtrl.overlay}"
  ng-if="!serviceRegistrationCtrl.overlay || serviceRegistrationCtrl.showOverlayRegistration">
  <nav class="navbar navbar-fixed-top" ng-if="serviceRegistrationCtrl.overlay">
    <div class="container-fluid">
      <div class="navbar-header">
        <span class="navbar-brand" translate>HPE Helion Development Platform</span>
      </div>
    </div>
  </nav>
  <div class="container registration-content">
    <div class="row">
      <h2 class="page-header" translate>
        Setup your Stratos Account
        <span class="helion-icon helion-icon-Help pull-right"></span>
      </h2>
      <p translate>
        Before you get started with Stratos, you will have to register into
        services to see what apps you have access to.
      </p>
      <table class="table">
        <thead>
          <tr>
            <th class="text-center registration-status" translate></th>
            <th translate>Name</th>
            <th translate>URL</th>
            <th translate>User Account</th>
            <th translate>Valid Until</th>
            <th class="registration-actions"></th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="serviceInstance in serviceRegistrationCtrl.serviceInstances">
            <td class="text-center">
              <span class="helion-icon helion-icon-lg helion-icon-Active_L text-primary"
                ng-if="serviceInstance.valid"></span>
              <span class="helion-icon helion-icon-lg helion-icon-Warning_L text-warning"
                ng-if="serviceInstance.expired"></span>
              <span class="helion-icon helion-icon-lg helion-icon-Critical_L text-warning"
                ng-if="serviceInstance.error"></span>
            </td>
            <td>{{serviceInstance.name}}</td>
            <td>{{serviceInstance.url}}</td>
            <td>{{serviceInstance.service_user}}</td>
            <td>{{serviceInstance.expires_at | amDateFormat:'MMM D YYYY, h:mm:ss a'}}</td>
            <td class="text-right">
              <a class="btn btn-link btn-sm" ng-if="!serviceInstance.valid"
                ng-click="serviceRegistrationCtrl.enterCredentials(serviceInstance)">
                <span ng-if="serviceInstance.expired" translate>Reconnect</span>
                <span ng-if="!serviceInstance.expired" translate>Connect</span>
              </a>
              <a class="btn btn-link btn-sm" ng-if="serviceInstance.valid"
                ng-click="serviceRegistrationCtrl.unregister(serviceInstance)" translate>Disconnect</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="fixed-footer" ng-if="serviceRegistrationCtrl.overlay">
    <span class="registration-notification" ng-if="serviceRegistrationCtrl.serviceInstanceModel.numRegistered > 0"
      translate-n="serviceRegistrationCtrl.serviceInstanceModel.numRegistered"
      translate-plural="{{serviceRegistrationCtrl.serviceInstanceModel.numRegistered}} clusters registered">
      {{serviceRegistrationCtrl.serviceInstanceModel.numRegistered}} cluster registered
    </span>
    <button type="button" class="btn btn-default"
      ng-disabled="serviceRegistrationCtrl.serviceInstanceModel.numRegistered === 0"
      ng-click="serviceRegistrationCtrl.completeRegistration()" translate>
      Done
    </button>
  </div>
  <flyout flyout-active="serviceRegistrationCtrl.showFlyout" flyout-close-icon="'helion-icon helion-icon-Close'">
    <credentials-form service-instance="serviceRegistrationCtrl.activeServiceInstance"
      on-cancel="serviceRegistrationCtrl.closeFlyout()"
      on-submit="serviceRegistrationCtrl.closeFlyout(data)">
    </credentials-form>
  </flyout>
</div>
